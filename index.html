<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ø§Ù„Ù…Ø³Ø¨Ø­Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ© | Abdulrahman Sarsak</title>
  <style>
    :root {
      --bg: #020617;
      --bg-soft: #020617;
      --bg-elevated: #020617;
      --card: #020617;
      --accent: #facc15;
      --accent-soft: rgba(250, 204, 21, 0.15);
      --accent-strong: #f97316;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --border: #1f2937;
      --danger: #f97373;
      --radius-card: 22px;
      --shadow-soft: 0 24px 60px rgba(0, 0, 0, 0.65);
    }

    * {
      box-sizing: border-box;
      padding: 0;
      margin: 0;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #111827 0, #020617 45%, #000 100%);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
    }

    .app-shell {
      max-width: 520px;
      width: 100%;
      background: radial-gradient(circle at top left, rgba(250, 204, 21, 0.07), transparent 55%),
                  radial-gradient(circle at bottom right, rgba(59, 130, 246, 0.12), transparent 55%),
                  #020617;
      border-radius: 28px;
      padding: 22px 18px 18px;
      box-shadow: var(--shadow-soft);
      border: 1px solid rgba(148, 163, 184, 0.25);
      position: relative;
      overflow: hidden;
    }

    .app-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 14px;
      gap: 12px;
    }

    .app-title-block {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .app-title {
      font-size: 1.25rem;
      font-weight: 700;
      letter-spacing: 0.03em;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .app-title span.icon {
      font-size: 1.4rem;
    }

    .app-subtitle {
      font-size: 0.8rem;
      color: var(--muted);
    }

    .tag {
      align-self: flex-start;
      font-size: 0.7rem;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(250, 204, 21, 0.45);
      background: linear-gradient(to right, rgba(250, 204, 21, 0.18), rgba(234, 179, 8, 0.08));
      color: #fefce8;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .tag-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: #22c55e;
      box-shadow: 0 0 8px rgba(34, 197, 94, 0.85);
    }

    /* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø°ÙƒØ§Ø± */
    .dhikr-select-row {
      margin-bottom: 10px;
      display: flex;
      flex-direction: column;
      gap: 6px;
      font-size: 0.8rem;
    }

    .dhikr-select-row label {
      color: var(--muted);
    }

    .dhikr-select-wrapper {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      align-items: center;
    }

    .dhikr-select-wrapper select {
      flex: 1;
      min-width: 0;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      background: rgba(15, 23, 42, 0.95);
      color: var(--text);
      font-size: 0.85rem;
      outline: none;
      appearance: none;
      direction: rtl;
    }

    .dhikr-select-wrapper select:focus {
      border-color: rgba(250, 204, 21, 0.8);
      box-shadow: 0 0 0 1px rgba(250, 204, 21, 0.4);
    }

    .custom-dhikr-input {
      width: 100%;
      margin-top: 4px;
      display: none;
    }

    .custom-dhikr-input input {
      width: 100%;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px dashed rgba(148, 163, 184, 0.7);
      background: rgba(15, 23, 42, 0.9);
      color: var(--text);
      font-size: 0.85rem;
      outline: none;
    }

    .custom-dhikr-input input::placeholder {
      color: rgba(148, 163, 184, 0.8);
    }

    .custom-dhikr-input input:focus {
      border-color: rgba(250, 204, 21, 0.9);
    }

    /* MISBAHA AREA */
    .misbaha-card {
      margin-top: 4px;
      background: radial-gradient(circle at top, rgba(15, 23, 42, 0.5), #020617 55%);
      border-radius: 26px;
      padding: 16px 16px 16px;
      border: 1px solid rgba(148, 163, 184, 0.3);
      position: relative;
      overflow: hidden;
    }

    .misbaha-card::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 20% 0%, rgba(250, 250, 250, 0.12), transparent 55%);
      opacity: 0.55;
      pointer-events: none;
    }

    .misbaha-header {
      position: relative;
      z-index: 1;
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
      padding-inline: 2px;
    }

    .misbaha-header-main {
      display: flex;
      flex-direction: column;
      gap: 3px;
    }

    .dhikr-label {
      font-size: 0.8rem;
      color: var(--muted);
    }

    .dhikr-text {
      font-size: 1.05rem;
      font-weight: 600;
      letter-spacing: 0.03em;
    }

    .sound-toggle {
      border: none;
      outline: none;
      background: rgba(15, 23, 42, 0.8);
      color: var(--text);
      border-radius: 999px;
      padding: 6px 14px;
      font-size: 0.8rem;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      border: 1px solid rgba(148, 163, 184, 0.35);
      backdrop-filter: blur(10px);
      transition: transform 0.12s ease, box-shadow 0.12s ease, border-color 0.12s ease, background 0.12s ease;
    }

    .sound-toggle:hover {
      transform: translateY(-1px);
      box-shadow: 0 8px 18px rgba(15, 23, 42, 0.8);
      border-color: rgba(250, 204, 21, 0.5);
    }

    .sound-toggle[data-enabled="false"] {
      opacity: 0.55;
      border-style: dashed;
    }

    .sound-toggle .icon {
      font-size: 1rem;
    }

    /* COUNTER AREA */
    .stats-row {
      position: relative;
      z-index: 1;
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
      gap: 10px;
      padding-inline: 4px;
    }

    .main-count {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .main-count-label {
      font-size: 0.78rem;
      color: var(--muted);
    }

    .main-count-value {
      font-size: clamp(2.2rem, 8vw, 3rem); /* ØªÙƒØ¨ÙŠØ± ÙˆØ§Ø¶Ø­ Ù„Ù„Ø£Ø±Ù‚Ø§Ù… */
      font-weight: 800;
      letter-spacing: 0.12em;
    }

    .sub-counts {
      display: flex;
      flex-direction: column;
      gap: 4px;
      font-size: 0.78rem;
      color: var(--muted);
      text-align: left;
    }

    .sub-counts span strong {
      color: #fef9c3;
    }

    .progress-track {
      position: relative;
      z-index: 1;
      height: 6px;
      width: 100%;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.85);
      overflow: hidden;
      margin: 4px 0 12px;
      border: 1px solid rgba(30, 64, 175, 0.6);
    }

    .progress-bar {
      height: 100%;
      width: 0%;
      border-radius: 999px;
      background: linear-gradient(90deg, #facc15, #f97316, #fb7185);
      box-shadow: 0 0 10px rgba(248, 250, 252, 0.7);
      transition: width 0.2s ease-out;
    }

    /* MISBAHA VISUAL */
    .misbaha-visual-wrapper {
      position: relative;
      z-index: 1;
      display: flex;
      justify-content: center;
      margin-top: 6px;
    }

    .misbaha {
      position: relative;
      width: 280px;
      height: 280px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.15s ease-out;
      transform-origin: center;
    }

    .misbaha.bump {
      transform: rotate(4deg);
    }

    .beads-ring {
      position: absolute;
      inset: 18px;
    }

    .bead-wrap {
      position: absolute;
      top: 50%;
      left: 50%;
      transform-origin: center;
      transition: transform 0.15s ease-out;
    }

    .bead {
      width: 18px;
      height: 26px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 20%, #fef9c3 0, #facc15 40%, #854d0e 100%);
      box-shadow:
        0 2px 6px rgba(0, 0, 0, 0.7),
        0 0 4px rgba(250, 204, 21, 0.55);
      display: flex;
      align-items: center;
      justify-content: center;
      transform: scale(1);
      transition: transform 0.16s ease-out, box-shadow 0.18s ease-out, filter 0.18s ease-out, opacity 0.18s ease-out;
      filter: saturate(0.7);
      opacity: 0.9;
    }

    .bead::after {
      content: "";
      width: 5px;
      height: 5px;
      border-radius: 999px;
      background: radial-gradient(circle, rgba(15, 23, 42, 0.9), rgba(30, 64, 175, 0.9));
      box-shadow: 0 0 2px rgba(15, 23, 42, 0.9);
    }

    .bead.active {
      transform: scale(1.25);
      box-shadow:
        0 0 12px rgba(250, 250, 250, 0.95),
        0 0 18px rgba(250, 204, 21, 0.85);
      filter: saturate(1.35);
      opacity: 1;
    }

    .bead.trail {
      opacity: 0.6;
      filter: saturate(0.9);
    }

    .misbaha-center-button {
      position: relative;
      width: 160px;       /* ØªÙƒØ¨ÙŠØ± Ø²Ø± Ø§Ù„Ø¶ØºØ· */
      height: 160px;      /* ØªÙƒØ¨ÙŠØ± Ø²Ø± Ø§Ù„Ø¶ØºØ· */
      border-radius: 999px;
      border: 2px solid rgba(250, 250, 250, 0.08);
      background: radial-gradient(circle at 30% 0%, rgba(250, 250, 250, 0.2), rgba(15, 23, 42, 0.9));
      box-shadow:
        0 18px 30px rgba(0, 0, 0, 0.85),
        0 0 0 1px rgba(15, 23, 42, 0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      overflow: hidden;
      transition: transform 0.1s ease-out, box-shadow 0.12s ease-out, border-color 0.12s ease-out;
    }

    .misbaha-center-button::before {
      content: "";
      position: absolute;
      inset: 8px;
      border-radius: inherit;
      border: 1px dashed rgba(248, 250, 252, 0.22);
      opacity: 0.8;
    }

    .misbaha-center-button:active {
      transform: scale(0.97) translateY(1px);
      box-shadow:
        0 10px 18px rgba(0, 0, 0, 0.95),
        0 0 0 1px rgba(30, 64, 175, 0.9);
      border-color: rgba(250, 204, 21, 0.6);
    }

    .center-labels {
      position: relative;
      z-index: 1;
      text-align: center;
      padding-inline: 6px;
    }

    .center-label-top {
      font-size: 0.78rem;
      color: var(--muted);
      margin-bottom: 4px;
    }

    .center-tap-text {
      font-size: 1.3rem;
      font-weight: 800;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      margin-bottom: 4px;
    }

    .center-sub {
      font-size: 0.72rem;
      color: #fef9c3;
    }

    .center-glow {
      position: absolute;
      inset: 0;
      border-radius: inherit;
      background: radial-gradient(circle, rgba(250, 204, 21, 0.25), transparent 60%);
      opacity: 0.6;
      pointer-events: none;
      mix-blend-mode: screen;
    }

    .connector {
      position: absolute;
      bottom: 12px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 5px;
      pointer-events: none;
    }

    .connector-string {
      width: 3px;
      height: 28px;
      background: linear-gradient(to bottom, rgba(15, 23, 42, 0.7), rgba(15, 23, 42, 1));
      border-radius: 999px;
      box-shadow: 0 0 2px rgba(15, 23, 42, 0.9);
    }

    .connector-bead {
      width: 20px;
      height: 26px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 20%, #fef3c7 0, #f97316 50%, #7c2d12 100%);
      box-shadow:
        0 2px 6px rgba(0, 0, 0, 0.85),
        0 0 6px rgba(248, 250, 252, 0.45);
    }

    /* ACTION ROW */
    .actions-row {
      position: relative;
      z-index: 1;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      margin-top: 16px;
    }

    .pill-btn {
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      background: rgba(15, 23, 42, 0.95);
      color: var(--text);
      padding: 8px 14px;
      font-size: 0.8rem;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      outline: none;
      transition: transform 0.08s ease-out, box-shadow 0.12s ease-out, border-color 0.12s ease-out, background 0.12s ease-out;
      backdrop-filter: blur(10px);
    }

    .pill-btn span.icon {
      font-size: 0.95rem;
    }

    .pill-btn:hover {
      transform: translateY(-1px);
      border-color: rgba(250, 250, 250, 0.4);
      box-shadow: 0 10px 18px rgba(15, 23, 42, 0.8);
    }

    .pill-btn:active {
      transform: translateY(1px) scale(0.98);
      box-shadow: 0 4px 10px rgba(15, 23, 42, 1);
    }

    .pill-btn.reset {
      border-color: rgba(248, 113, 113, 0.6);
      color: #fecaca;
    }

    .pill-btn.reset:hover {
      background: rgba(127, 29, 29, 0.9);
      border-color: rgba(248, 113, 113, 0.9);
    }

    .hint {
      font-size: 0.7rem;
      color: var(--muted);
      text-align: left;
    }

    /* FOOTER */
    .footer {
      margin-top: 16px;
      padding-top: 10px;
      border-top: 1px dashed rgba(148, 163, 184, 0.4);
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      font-size: 0.72rem;
      color: var(--muted);
    }

    .footer-name {
      display: flex;
      flex-direction: column;
      gap: 1px;
    }

    .footer-name strong {
      color: #f9fafb;
      letter-spacing: 0.06em;
    }

    .footer-name span.en {
      text-transform: uppercase;
      letter-spacing: 0.18em;
      font-size: 0.62rem;
      color: rgba(148, 163, 184, 0.95);
    }

    .footer-dua {
      text-align: left;
      font-size: 0.68rem;
      color: #e5e7eb;
    }

    @media (max-width: 420px) {
      .app-shell {
        border-radius: 22px;
        padding: 18px 14px 14px;
      }

      .misbaha {
        width: 250px;
        height: 250px;
      }

      .misbaha-center-button {
        width: 150px;
        height: 150px;
      }

      .app-title {
        font-size: 1.1rem;
      }
    }
  </style>
</head>
<body>
  <div class="app-shell">
    <header class="app-header">
      <div class="app-title-block">
        <div class="app-title">
          <span class="icon">ğŸ“¿</span>
          <span>Ø§Ù„Ù…Ø³Ø¨Ø­Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©</span>
        </div>
        <div class="app-subtitle">Ø¹Ø¯Ù‘ ØªØ³Ø¨ÙŠØ­ Ø£Ù†ÙŠÙ‚ â€“ Ù…Ù†Ø§Ø³Ø¨ Ù„ÙƒØ¨Ø§Ø± Ø§Ù„Ø³Ù† ÙˆØ§Ù„Ø¬ÙˆØ§Ù„</div>
      </div>
      <div class="tag">
        <span class="tag-dot"></span>
        <span>ÙˆÙØ±Ø¯ Ø§Ù„ÙŠÙˆÙ…</span>
      </div>
    </header>

    <!-- Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø°ÙƒØ± -->
    <section class="dhikr-select-row">
      <label for="dhikrSelect">Ø§Ø®ØªØ± Ø§Ù„Ø°ÙƒØ±:</label>
      <div class="dhikr-select-wrapper">
        <select id="dhikrSelect">
          <option value="Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡">Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡</option>
          <option value="Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡">Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡</option>
          <option value="Ø§Ù„Ù„Ù‡ Ø£ÙƒØ¨Ø±">Ø§Ù„Ù„Ù‡ Ø£ÙƒØ¨Ø±</option>
          <option value="Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡">Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡</option>
          <option value="Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡ ÙˆØ­Ø¯Ù‡ Ù„Ø§ Ø´Ø±ÙŠÙƒ Ù„Ù‡ØŒ Ù„Ù‡ Ø§Ù„Ù…Ù„Ùƒ ÙˆÙ„Ù‡ Ø§Ù„Ø­Ù…Ø¯ ÙˆÙ‡Ùˆ Ø¹Ù„Ù‰ ÙƒÙ„ Ø´ÙŠØ¡ Ù‚Ø¯ÙŠØ±">
            Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡ ÙˆØ­Ø¯Ù‡ Ù„Ø§ Ø´Ø±ÙŠÙƒ Ù„Ù‡ØŒ Ù„Ù‡ Ø§Ù„Ù…Ù„Ùƒ ÙˆÙ„Ù‡ Ø§Ù„Ø­Ù…Ø¯ ÙˆÙ‡Ùˆ Ø¹Ù„Ù‰ ÙƒÙ„ Ø´ÙŠØ¡ Ù‚Ø¯ÙŠØ±
          </option>
          <option value="Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ ÙˆØ¨Ø­Ù…Ø¯Ù‡">Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ ÙˆØ¨Ø­Ù…Ø¯Ù‡</option>
          <option value="Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ Ø§Ù„Ø¹Ø¸ÙŠÙ…">Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ Ø§Ù„Ø¹Ø¸ÙŠÙ…</option>
          <option value="Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ ÙˆØ¨Ø­Ù…Ø¯Ù‡ØŒ Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ Ø§Ù„Ø¹Ø¸ÙŠÙ…">Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ ÙˆØ¨Ø­Ù…Ø¯Ù‡ØŒ Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡ Ø§Ù„Ø¹Ø¸ÙŠÙ…</option>
          <option value="Ø£Ø³ØªØºÙØ± Ø§Ù„Ù„Ù‡">Ø£Ø³ØªØºÙØ± Ø§Ù„Ù„Ù‡</option>
          <option value="Ø§Ù„Ù„Ù‡Ù… ØµÙ„ÙÙ‘ ÙˆØ³Ù„Ù… Ø¹Ù„Ù‰ Ù†Ø¨ÙŠÙ†Ø§ Ù…Ø­Ù…Ø¯">Ø§Ù„Ù„Ù‡Ù… ØµÙ„ÙÙ‘ ÙˆØ³Ù„Ù… Ø¹Ù„Ù‰ Ù†Ø¨ÙŠÙ†Ø§ Ù…Ø­Ù…Ø¯</option>
          <option value="Ø­Ø³Ø¨ÙŠ Ø§Ù„Ù„Ù‡ Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ù‡Ùˆ Ø¹Ù„ÙŠÙ‡ ØªÙˆÙƒÙ„Øª ÙˆÙ‡Ùˆ Ø±Ø¨ Ø§Ù„Ø¹Ø±Ø´ Ø§Ù„Ø¹Ø¸ÙŠÙ…">
            Ø­Ø³Ø¨ÙŠ Ø§Ù„Ù„Ù‡ Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ù‡Ùˆ Ø¹Ù„ÙŠÙ‡ ØªÙˆÙƒÙ„Øª ÙˆÙ‡Ùˆ Ø±Ø¨ Ø§Ù„Ø¹Ø±Ø´ Ø§Ù„Ø¹Ø¸ÙŠÙ…
          </option>
          <option value="Ù„Ø§ Ø­ÙˆÙ„ ÙˆÙ„Ø§ Ù‚ÙˆØ© Ø¥Ù„Ø§ Ø¨Ø§Ù„Ù„Ù‡">Ù„Ø§ Ø­ÙˆÙ„ ÙˆÙ„Ø§ Ù‚ÙˆØ© Ø¥Ù„Ø§ Ø¨Ø§Ù„Ù„Ù‡</option>
          <option value="Ø§Ù„Ù„Ù‡Ù… Ø§ØºÙØ± Ù„ÙŠ ÙˆÙ„ÙˆØ§Ù„Ø¯ÙŠÙÙ‘ ÙˆÙ„Ù„Ù…Ø¤Ù…Ù†ÙŠÙ† ÙˆØ§Ù„Ù…Ø¤Ù…Ù†Ø§Øª">
            Ø§Ù„Ù„Ù‡Ù… Ø§ØºÙØ± Ù„ÙŠ ÙˆÙ„ÙˆØ§Ù„Ø¯ÙŠÙÙ‘ ÙˆÙ„Ù„Ù…Ø¤Ù…Ù†ÙŠÙ† ÙˆØ§Ù„Ù…Ø¤Ù…Ù†Ø§Øª
          </option>
          <option value="custom">Ø°ÙƒØ± Ù…Ø®ØµØµâ€¦</option>
        </select>
      </div>
      <div class="custom-dhikr-input" id="customDhikrWrapper">
        <input
          id="customDhikrInput"
          type="text"
          placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ø°ÙƒØ± Ø§Ù„Ø°ÙŠ ØªØ±ØºØ¨ Ø¨Ù‡ Ù‡Ù†Ø§â€¦"
        />
      </div>
    </section>

    <section class="misbaha-card">
      <div class="misbaha-header">
        <div class="misbaha-header-main">
          <div class="dhikr-label">Ø§Ù„Ø°ÙƒØ± Ø§Ù„Ø­Ø§Ù„ÙŠ</div>
          <div class="dhikr-text" id="dhikrText">Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡</div>
        </div>
        <button class="sound-toggle" id="soundToggle" data-enabled="true">
          <span class="icon" id="soundIcon">ğŸ”Š</span>
          <span>Ø§Ù„ØµÙˆØª</span>
        </button>
      </div>

      <div class="stats-row">
        <div class="main-count">
          <div class="main-count-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªØ³Ø¨ÙŠØ­</div>
          <div class="main-count-value" id="mainCount">0</div>
        </div>
        <div class="sub-counts">
          <span>Ø§Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„Ø­Ø§Ù„ÙŠØ© (Ù…Ù† Ù£Ù£): <strong id="roundCount">0</strong></span>
          <span>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¬ÙˆÙ„Ø§Øª: <strong id="totalRounds">0</strong></span>
        </div>
      </div>

      <div class="progress-track">
        <div class="progress-bar" id="progressBar"></div>
      </div>

      <div class="misbaha-visual-wrapper">
        <div class="misbaha" id="misbaha">
          <div class="beads-ring" id="beadsRing">
            <!-- ÙŠØªÙ… ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø®Ø±Ø²Ø§Øª Ø¹Ø¨Ø± JavaScript -->
          </div>

          <button class="misbaha-center-button" id="tapButton">
            <div class="center-glow"></div>
            <div class="center-labels">
              <div class="center-label-top">Ø§Ø¶ØºØ· Ù„Ù„ØªØ³Ø¨ÙŠØ­</div>
              <div class="center-tap-text">Ø³ÙØ¨ÙÙ‘Ø­</div>
              <div class="center-sub">Ø¶ØºØ· ÙˆØ§Ø­Ø¯ = ØªØ³Ø¨ÙŠØ­Ø© ÙˆØ§Ø­Ø¯Ø©</div>
            </div>
          </button>

          <div class="connector">
            <div class="connector-string"></div>
            <div class="connector-bead"></div>
          </div>
        </div>
      </div>

      <div class="actions-row">
        <button class="pill-btn reset" id="resetBtn">
          <span class="icon">â†º</span>
          <span>ØªØµÙÙŠØ± Ø§Ù„Ø¹Ø¯Ù‘Ø§Ø¯</span>
        </button>
        <div class="hint">ÙŠØªÙ… Ø­ÙØ¸ Ø¹Ø¯Ù‘Ùƒ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ø¬Ù‡Ø§Ø²</div>
      </div>
    </section>

    <footer class="footer">
      <div class="footer-name">
        <strong>Ø¹Ø¨Ø¯Ø§Ù„Ø±Ø­Ù…Ù† Ø³Ø±Ø³Ùƒ</strong>
        <span class="en">ABDULRAHMAN SARSAK</span>
      </div>
      <div class="footer-dua">
        <span>Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„ Ø£Ù„Ø³Ù†ØªÙ†Ø§ Ø¹Ø§Ù…Ø±Ø© Ø¨Ø°ÙƒØ±ÙƒØŒ ÙˆÙ‚Ù„ÙˆØ¨Ù†Ø§ Ø¨Ø®Ø´ÙŠØªÙƒ.</span>
      </div>
    </footer>
  </div>

  <script>
    // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¹Ø§Ù…Ø©
    const BEADS_COUNT = 33;
    const STORAGE_KEY = "tasbeeh_total_count_v1";
    const DHIKR_KEY = "tasbeeh_current_dhikr_v1";

    const beadsRing = document.getElementById("beadsRing");
    const misbahaEl = document.getElementById("misbaha");
    const tapButton = document.getElementById("tapButton");
    const resetBtn = document.getElementById("resetBtn");
    const mainCountEl = document.getElementById("mainCount");
    const roundCountEl = document.getElementById("roundCount");
    const totalRoundsEl = document.getElementById("totalRounds");
    const progressBar = document.getElementById("progressBar");
    const soundToggle = document.getElementById("soundToggle");
    const soundIcon = document.getElementById("soundIcon");
    const dhikrTextEl = document.getElementById("dhikrText");
    const dhikrSelectEl = document.getElementById("dhikrSelect");
    const customDhikrWrapper = document.getElementById("customDhikrWrapper");
    const customDhikrInput = document.getElementById("customDhikrInput");

    let totalCount = 0;
    let soundEnabled = true;
    let beadElements = [];

    // Web Audio API Ù„Ù„ØµÙˆØª
    let audioCtx = null;
    function ensureAudioContext() {
      if (!audioCtx) {
        try {
          audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        } catch (e) {
          audioCtx = null;
        }
      }
    }

    function playClickSound() {
      if (!soundEnabled) return;
      ensureAudioContext();
      if (!audioCtx) return;

      const duration = 0.08;
      const frequency = 1200;
      const oscillator = audioCtx.createOscillator();
      const gainNode = audioCtx.createGain();

      oscillator.type = "sine";
      oscillator.frequency.setValueAtTime(frequency, audioCtx.currentTime);

      gainNode.gain.setValueAtTime(0.0001, audioCtx.currentTime);
      gainNode.gain.exponentialRampToValueAtTime(0.25, audioCtx.currentTime + 0.01);
      gainNode.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + duration);

      oscillator.connect(gainNode);
      gainNode.connect(audioCtx.destination);

      oscillator.start();
      oscillator.stop(audioCtx.currentTime + duration);
    }

    // Ø¥Ù†Ø´Ø§Ø¡ Ø®Ø±Ø²Ø§Øª Ø§Ù„Ù…Ø³Ø¨Ø­Ø© Ø¨Ø´ÙƒÙ„ Ø¯Ø§Ø¦Ø±ÙŠ
    function createBeads() {
      beadElements = [];
      const radius = 100; // Ù†ØµÙ Ù‚Ø·Ø± Ø§Ù„Ø¯Ø§Ø¦Ø±Ø©
      const centerX = 0;
      const centerY = 0;

      for (let i = 0; i < BEADS_COUNT; i++) {
        const wrap = document.createElement("div");
        wrap.className = "bead-wrap";

        const bead = document.createElement("div");
        bead.className = "bead";
        bead.dataset.index = i;

        wrap.appendChild(bead);
        beadsRing.appendChild(wrap);

        const angleDeg = (360 / BEADS_COUNT) * i - 90; // Ù†Ø¨Ø¯Ø£ Ù…Ù† Ø£Ø¹Ù„Ù‰ Ø§Ù„Ø¯Ø§Ø¦Ø±Ø©
        const angleRad = (angleDeg * Math.PI) / 180;

        const x = centerX + radius * Math.cos(angleRad);
        const y = centerY + radius * Math.sin(angleRad);

        wrap.style.transform = `translate(-50%, -50%) translate(${x}px, ${y}px) rotate(${angleDeg}deg)`;

        beadElements.push(bead);
      }
    }

    createBeads();

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ø¯Ù‘ Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ†
    function loadCount() {
      const stored = localStorage.getItem(STORAGE_KEY);
      if (stored !== null && !isNaN(parseInt(stored, 10))) {
        totalCount = parseInt(stored, 10);
      } else {
        totalCount = 0;
      }
    }

    function saveCount() {
      try {
        localStorage.setItem(STORAGE_KEY, String(totalCount));
      } catch (e) {
        // ØªØ¬Ø§Ù‡Ù„ Ø£ÙŠ Ø®Ø·Ø£
      }
    }

    // Ø­ÙØ¸ / ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø°ÙƒØ± Ø§Ù„Ø­Ø§Ù„ÙŠ
    function loadDhikr() {
      const storedDhikr = localStorage.getItem(DHIKR_KEY);
      if (!storedDhikr) return;

      // Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ø§Ø¯ÙŠØ©
      const options = Array.from(dhikrSelectEl.options);
      const matchOption = options.find((opt) => opt.value === storedDhikr);
      if (matchOption) {
        dhikrSelectEl.value = storedDhikr;
        dhikrTextEl.textContent = storedDhikr;
        customDhikrWrapper.style.display = "none";
      } else {
        // Ù†Ø¹ØªØ¨Ø±Ù‡ Ø°ÙƒØ± Ù…Ø®ØµØµ
        dhikrSelectEl.value = "custom";
        dhikrTextEl.textContent = storedDhikr;
        customDhikrWrapper.style.display = "block";
        customDhikrInput.value = storedDhikr;
      }
    }

    function saveDhikr(text) {
      try {
        localStorage.setItem(DHIKR_KEY, text);
      } catch (e) {
        // ØªØ¬Ø§Ù‡Ù„
      }
    }

    function handleDhikrChange() {
      const value = dhikrSelectEl.value;
      if (value === "custom") {
        customDhikrWrapper.style.display = "block";
        if (customDhikrInput.value.trim().length > 0) {
          dhikrTextEl.textContent = customDhikrInput.value.trim();
          saveDhikr(customDhikrInput.value.trim());
        } else {
          dhikrTextEl.textContent = "Ø°ÙƒØ± Ù…Ø®ØµØµ";
          saveDhikr("Ø°ÙƒØ± Ù…Ø®ØµØµ");
        }
      } else {
        customDhikrWrapper.style.display = "none";
        dhikrTextEl.textContent = value;
        saveDhikr(value);
      }
    }

    function handleCustomDhikrInput() {
      const text = customDhikrInput.value.trim();
      if (text.length === 0) {
        dhikrTextEl.textContent = "Ø°ÙƒØ± Ù…Ø®ØµØµ";
        saveDhikr("Ø°ÙƒØ± Ù…Ø®ØµØµ");
      } else {
        dhikrTextEl.textContent = text;
        saveDhikr(text);
      }
    }

    // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
    function updateUI() {
      mainCountEl.textContent = totalCount.toString();

      const withinRound = totalCount % BEADS_COUNT;
      const totalRounds = Math.floor(totalCount / BEADS_COUNT);

      roundCountEl.textContent = withinRound.toString();
      totalRoundsEl.textContent = totalRounds.toString();

      const progress = (withinRound / BEADS_COUNT) * 100;
      progressBar.style.width = progress + "%";

      // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø®Ø±Ø²Ø§Øª
      const activeIndex =
        withinRound === 0 && totalCount > 0 ? BEADS_COUNT - 1 : withinRound - 1;

      beadElements.forEach((bead, index) => {
        bead.classList.remove("active", "trail");
        if (index === activeIndex && totalCount > 0) {
          bead.classList.add("active");
        } else if (
          totalCount > 0 &&
          index === (activeIndex - 1 + BEADS_COUNT) % BEADS_COUNT
        ) {
          bead.classList.add("trail");
        }
      });
    }

    // Ø­Ø±ÙƒØ© Ø§Ù„Ù…Ø³Ø¨Ø­Ø©
    function bumpMisbaha() {
      misbahaEl.classList.remove("bump");
      void misbahaEl.offsetWidth; // Ù„Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„Ø£Ù†ÙŠÙ…ÙŠØ´Ù†
      misbahaEl.classList.add("bump");
    }

    // Ø¹Ù†Ø¯ Ø§Ù„ØªØ³Ø¨ÙŠØ­
    function handleTasbeeh() {
      totalCount += 1;
      saveCount();
      updateUI();
      bumpMisbaha();
      playClickSound();
    }

    // ØªØµÙÙŠØ± Ø§Ù„Ø¹Ø¯Ù‘Ø§Ø¯
    function resetCounter() {
      if (!confirm("Ù‡Ù„ ØªØ±ØºØ¨ ÙÙŠ ØªØµÙÙŠØ± Ø§Ù„Ø¹Ø¯Ù‘Ø§Ø¯ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ØŸ")) return;
      totalCount = 0;
      saveCount();
      updateUI();
    }

    // ØªÙØ¹ÙŠÙ„/Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØµÙˆØª
    function toggleSound() {
      soundEnabled = !soundEnabled;
      soundToggle.dataset.enabled = soundEnabled ? "true" : "false";
      soundIcon.textContent = soundEnabled ? "ğŸ”Š" : "ğŸ”‡";
    }

    // Ø±Ø¨Ø· Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
    tapButton.addEventListener("click", handleTasbeeh);
    tapButton.addEventListener("touchstart", function (e) {
      e.preventDefault();
      handleTasbeeh();
    });

    resetBtn.addEventListener("click", resetCounter);
    soundToggle.addEventListener("click", toggleSound);
    dhikrSelectEl.addEventListener("change", handleDhikrChange);
    customDhikrInput.addEventListener("input", handleCustomDhikrInput);

    // Ø¨Ø¯Ø¡ Ø§Ù„ØªØ´ØºÙŠÙ„
    loadCount();
    loadDhikr();
    // Ø¥Ø°Ø§ Ù„Ù… ÙŠÙƒÙ† Ù‡Ù†Ø§Ùƒ Ø°ÙƒØ± Ù…Ø®Ø²Ù‘Ù†ØŒ Ù†Ø¶Ø¨Ø· Ø£ÙˆÙ„ Ø®ÙŠØ§Ø±
    if (!localStorage.getItem(DHIKR_KEY)) {
      dhikrTextEl.textContent = dhikrSelectEl.value;
      saveDhikr(dhikrSelectEl.value);
    }
    updateUI();
  </script>
</body>
</html>
